var test=function(t){"use strict";const e=Function.prototype.call.bind(Object.prototype.toString),n=Function.prototype.call.bind(Object.prototype.hasOwnProperty),o=Object.fromEntries(["Object","Number","String","Array","URLSearchParams","FormData"].map((t=>[t,`[object ${t}]`])));class i{static init(t,e){(function(){if("object"==typeof globalThis&&globalThis)return globalThis;if("object"==typeof window&&window)return window;if("object"==typeof self&&self)return self;if("object"==typeof global&&global)return global;throw new Error("unable to get globalThis, try 'import 'simplified-fetch/polyfill/globalThis'' before init")}())[(null==t?void 0:t.newName)||"Api"]=new r(e,c(i.baseConfig,t))}static create(t,e){return new r(e,c(i.baseConfig,t))}}i.baseConfig={method:"GET",bodyMixin:"json",headers:{"Content-Type":"application/json"},enableAbort:!1,pureResponse:!1};class r{constructor(t,e){this.aborts={},this.request=new s,this.response=new s;for(const[o,i]of Object.entries(t)){let t,r={};"string"==typeof i||"function"==typeof i?t=i:({urn:t,config:r={}}=i);const s=c(e,r);let p,f;const h=null==s?void 0:s.enableAbort;h&&(p=new AbortController,f=p.signal,s.signal=f,this.aborts[o]=[p,f]),this[o]=async(i,b,d={})=>{var y;let m=!1;const v=c(s,d),g=l(t,v,b);g.pathname+=null!==(y=null==v?void 0:v.suffix)&&void 0!==y?y:"";const j=null!=i?u(g,v,i):g;for(const s in this.request.pipeMap)if(n(this.request.pipeMap,s))for(const n of this.request.pipeMap[s])m||"function"!=typeof n||(m=await n(j,v,[i,b,d],[o,t,r,e]));return new Promise(((t,e)=>{if(m)return void e(m);const o=e=>{m=!0,t(e)},i=t=>{m=!0,e(t)};"number"==typeof h&&(f.timeout=h,setTimeout((()=>p.abort()),h));const r=new Request(j.toString(),v);fetch(r).then((async s=>{for(const t in this.response.pipeMap)if(n(this.response.pipeMap,t))for(const e of this.response.pipeMap[t])if("function"==typeof e&&await e(s.clone(),r.clone(),[o,i]),m)return;a([t,e],s,null==v?void 0:v.bodyMixin,null==v?void 0:v.pureResponse)})).catch((t=>{"AbortError"===t.name&&"number"==typeof h&&(t.timeout=h),e(t)}))}))}}}}class s{constructor(){this.pipeMap={},this.use=(...t)=>{let e,o;return"function"!=typeof t[0]?(e=Math.abs(Math.trunc(t[0])),o=t.slice(1)):(e=0,o=t),n(this.pipeMap,e)?this.pipeMap[e].push(...o):this.pipeMap[e]=Array.from(o),[e,o]},this.eject=([t,e])=>{var n,o;let i,r;"function"!=typeof t?(i=Math.abs(Math.trunc(t)),r=e):(i=null!==(o=null===(n=Object.keys(this.pipeMap))||void 0===n?void 0:n[0])&&void 0!==o?o:0,r=[t].concat(e));const s=Array(r.length).fill(!1);return this.pipeMap[i]=this.pipeMap[i].filter((t=>{const e=r.indexOf(t);return-1===e||(s[e]=!0,!1)})),s}}}function a([t,e],n,o="json",i=!1){const r=i?n.clone():void 0;n[o]().then((e=>t(i?[e,r]:e)))}function c(t,n){const i=Object.assign({},null==t?void 0:t.headers,null==n?void 0:n.headers);return e(null==t?void 0:t.custom)===o.Object||e(null==n?void 0:n.custom)===o.Object?{...t,...n,headers:i,custom:Object.assign({},null==t?void 0:t.custom,null==n?void 0:n.custom)}:{...t,...n,headers:i}}function l(t,e,n){var o;const i=null!==(o=null==e?void 0:e.baseURL)&&void 0!==o?o:void 0;return"function"==typeof t?new URL(t(n),i):p(n,new URL(t,i))}function u(t,n,i){return["GET","HEAD"].includes(n.method.toUpperCase())?t=p(i,t):((e(i)===o.Object||Array.isArray(i))&&(i=JSON.stringify(i)),n.body=i),t}function p(t,n){const i=e(t);if([o.Object,o.FormData,o.URLSearchParams].includes(i)){const e=n.search.includes("?");n.search+=e&&"&"!==n.search.slice(-1)[0]?"&":"",n.search+=new URLSearchParams(t).toString()}else if([o.Array,o.Number,o.String].includes(i)){const e="/"===n.pathname.slice(-1)[0];n.pathname+=(e?"":"/")+t.toString()}return n}return t.default=i,t.urnParser=(t,...e)=>n=>t.reduce(((t,o,i)=>{var r;return t+o+(null!==(r=null==n?void 0:n[e[i]])&&void 0!==r?r:"")}),""),Object.defineProperty(t,"__esModule",{value:!0}),t}({});
